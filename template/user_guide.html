<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user.name }}'s Guides</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='static/style/mainpage.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='static/style/guide.css') }}" />
</head>
<body>
    <div class="main-container">
        <div class="sidebar">
            <div class="logo-area">LEAGUE OF STATS</div>

            <div class="sidebar-menu">
                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                <a href="{{ url_for('guide') }}" class="active">Guides</a>
                <a href="{{ url_for('profile') }}">Profile</a>
            </div>
        </div>

        <div class="content">
            <div class="Title">
                <h2>{{ username }}'s Guides</h2>
            </div>

            <div class="guides-content">
                {% if guides %}
                    <ul class="guide-list">
                        {% for guide in guides %}
                            <li class="guide-item">
                                <h3>{{ guide.title }}</h3>
                                <button class="send-btn" data-guide-id="{{ guide.id }}">Send</button>
                                <p>{{ guide.content[:300] }}{% if guide.content|length > 300 %}...{% endif %}</p>
                            <em>Created at: {{ guide.created_at.strftime('%Y-%m-%d %H:%M') }}</em>
                            <form action="{{ url_for('delete_guide', guide_id=guide.id) }}" method="post" style="display:inline;">
                                <button type="submit" onclick="return confirm('Are you sure you want to delete this guide?');">Delete</button>
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>You haven't created any guides yet.</p>
            {% endif %}

            
            <!-- Hidden modal for friend selection -->
            <div id="friend-modal" style="display:none; position:fixed; top:10%; left:50%; transform:translateX(-50%); background:#fff; border:1px solid #ccc; padding:20px; max-height:300px; overflow-y:auto; z-index:1000;">
            <h3>Select a Friend to Send Guide</h3>
            <ul id="friend-list"></ul>
            <button id="close-friend-modal">Close</button>

        </div>


            <a href="{{ url_for('create_guide') }}">
                <button>Create New Guide</button>
            </a>
        </div>
    </div>

    <div class="footer">
        League of Stats v1.0 â€¢ CITS3403 GROUP44 This website has no relation to RIOT GAMES
    </div>
</body>
</html>
